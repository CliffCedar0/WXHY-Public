const e=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],n=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"];function t(t,r,o){let s=t;(r<2||2===r&&o<4)&&s--;let i=s-1984,a=i%10,c=i%12;return a<0&&(a+=10),c<0&&(c+=12),{gan:a,zhi:c,name:e[a]+n[c]}}function r(r){const o=r||new Date,s=o.getFullYear(),i=o.getMonth()+1,a=o.getDate();o.getDay(),o.toTimeString().slice(0,5);const c=t(s,i,a),l=c.name,u=function(e){const n=new Date(2e3,0,1),t=Math.floor((e-n)/864e5);let r=(4+t)%10,o=(6+t)%12;return r<0&&(r+=10),o<0&&(o+=12),{gan:r,zhi:o}}(o),m=e[u.gan]+n[u.zhi],g=function(t,r){const o=t.getMonth()+1,s=t.getDate();let i=0;(2===o&&s>=4||o>2)&&(i=2),(3===o&&s>=6||o>3)&&(i=3),(4===o&&s>=5||o>4)&&(i=4),(5===o&&s>=6||o>5)&&(i=5),(6===o&&s>=6||o>6)&&(i=6),(7===o&&s>=7||o>7)&&(i=7),(8===o&&s>=8||o>8)&&(i=8),(9===o&&s>=8||o>9)&&(i=9),(10===o&&s>=8||o>10)&&(i=10),(11===o&&s>=8||o>11)&&(i=11),(12===o&&s>=7||o>12)&&(i=0),1===o&&s>=6&&(i=1);let a=i-2;return a<0&&(a+=12),e[(r%5*2+2+a)%10%10]+n[i]}(o,c.gan),h=function(t,r){const o=t.getHours();let s=Math.floor((o+1)/2)%12;return e[(r%5*2+s)%10]+n[s]}(o,u.gan);return{fullString:`${s}年${i}月${a}日`,ganZhi:`${l}年 ${g}月 ${m}日 ${h}时`,siZhu:{year:l,month:g,day:m,hour:h}}}function o(e){return{"甲":"#2E7D32","乙":"#2E7D32","寅":"#2E7D32","卯":"#2E7D32","丙":"#C62828","丁":"#C62828","巳":"#C62828","午":"#C62828","戊":"#795548","己":"#795548","辰":"#795548","戌":"#795548","丑":"#795548","未":"#795548","庚":"#EF6C00","辛":"#EF6C00","申":"#EF6C00","酉":"#EF6C00","壬":"#1565C0","癸":"#1565C0","亥":"#1565C0","子":"#1565C0"}[e]||"#333"}function s(e){const r=e||new Date,o=r.getMonth()+1,s=r.getDate(),i=r.getHours(),a=t(r.getFullYear(),o,s),c=a.zhi+1,l=Math.floor((i+1)/2)%12;return{y:c,m:o,d:s,h:l+1,display:{y:n[a.zhi],m:o,d:s,h:n[l]}}}function i(e){return e.slice(0,3),e.slice(3,6),e.join(""),function(e){const n=e.slice(3,6),t=e.slice(0,3),r=e=>e[0]+2*e[1]+4*e[2],o=r(n),s=r(t),i=function(e,n){return[["坤为地","地雷复","地水师","地泽临","地山谦","地火明夷","地风升","地天泰"],["雷地豫","震为雷","雷水解","雷泽归妹","雷山小过","雷火丰","雷风恒","雷天大壮"],["水地比","水雷屯","坎为水","水泽节","水山蹇","水火既济","水风井","水天需"],["泽地萃","泽雷随","泽水困","兑为泽","泽山咸","泽火革","泽风大过","泽天夬"],["山地剥","山雷颐","山水蒙","山泽损","艮为山","山火贲","山风蛊","山天大畜"],["火地晋","火雷噬嗑","火水未济","火泽睽","火山旅","离为火","火风鼎","火天大有"],["风地观","风雷益","风水涣","风泽中孚","风山渐","风火家人","巽为风","风天小畜"],["天地否","天雷无妄","天水讼","天泽履","天山遁","天火同人","天风姤","乾为天"]][e][n]}(o,s),l=function(e,n){const t=(e,n)=>e^1<<n,r=[0,1,2,3,4,5,6,7];for(let o of r){let r=o,s=o;if(r===n&&s===e)return{gong:a(o),element:c(o),shi:6,ying:3,generation:"六世卦",isPure:!0};if(r=t(r,0),r===n&&s===e)return{gong:a(o),element:c(o),shi:1,ying:4,generation:"一世卦"};if(r=t(r,1),r===n&&s===e)return{gong:a(o),element:c(o),shi:2,ying:5,generation:"二世卦"};if(r=t(r,2),r===n&&s===e)return{gong:a(o),element:c(o),shi:3,ying:6,generation:"三世卦"};if(s=t(s,0),r===n&&s===e)return{gong:a(o),element:c(o),shi:4,ying:1,generation:"四世卦"};if(s=t(s,1),r===n&&s===e)return{gong:a(o),element:c(o),shi:5,ying:2,generation:"五世卦"};if(s=t(s,0),r===n&&s===e)return{gong:a(o),element:c(o),shi:4,ying:1,generation:"游魂卦"};if(r=t(r,0),r=t(r,1),r=t(r,2),r===n&&s===e)return{gong:a(o),element:c(o),shi:3,ying:6,generation:"归魂卦"}}return{gong:"Unknown",element:"?",shi:0,ying:0,generation:""}}(o,s);return{name:i,gong:l.gong,element:l.element,shi:l.shi,ying:l.ying,generation:l.generation}}(e)}function a(e){return["坤","震","坎","兑","艮","离","巽","乾"][e]}function c(e){return["土","木","水","金","土","火","木","金"][e]}function l(e){const n=["青龙","朱雀","勾陈","螣蛇","白虎","玄武"];let t=0;"甲"===e||"乙"===e?t=0:"丙"===e||"丁"===e?t=1:"戊"===e?t=2:"己"===e?t=3:"庚"===e||"辛"===e?t=4:"壬"!==e&&"癸"!==e||(t=5);const r=[];for(let o=0;o<6;o++)r.push(n[(t+o)%6]);return r}const u={"乾":{inner:{stem:"甲",branches:["子","寅","辰"]},outer:{stem:"壬",branches:["午","申","戌"]}},"坤":{inner:{stem:"乙",branches:["未","巳","卯"]},outer:{stem:"癸",branches:["丑","亥","酉"]}},"震":{inner:{stem:"庚",branches:["子","寅","辰"]},outer:{stem:"庚",branches:["午","申","戌"]}},"巽":{inner:{stem:"辛",branches:["丑","亥","酉"]},outer:{stem:"辛",branches:["未","巳","卯"]}},"坎":{inner:{stem:"戊",branches:["寅","辰","午"]},outer:{stem:"戊",branches:["申","戌","子"]}},"离":{inner:{stem:"己",branches:["卯","丑","亥"]},outer:{stem:"己",branches:["酉","未","巳"]}},"艮":{inner:{stem:"丙",branches:["辰","午","申"]},outer:{stem:"丙",branches:["戌","子","寅"]}},"兑":{inner:{stem:"丁",branches:["巳","卯","丑"]},outer:{stem:"丁",branches:["亥","酉","未"]}}};function m(e,n){const t=["坤","震","坎","兑","艮","离","巽","乾"],r=t[e];let o=[];const s=u[t[n]].inner;for(let a=0;a<3;a++)o.push({stem:s.stem,branch:s.branches[a]});const i=u[r].outer;for(let a=0;a<3;a++)o.push({stem:i.stem,branch:i.branches[a]});return o}function g(e,n){const t={"木":"Wood","火":"Fire","土":"Earth","金":"Metal","水":"Water"};return{Wood:{Wood:"兄弟",Fire:"子孙",Earth:"妻财",Metal:"官鬼",Water:"父母"},Fire:{Fire:"兄弟",Earth:"子孙",Metal:"妻财",Water:"官鬼",Wood:"父母"},Earth:{Earth:"兄弟",Metal:"子孙",Water:"妻财",Wood:"官鬼",Fire:"父母"},Metal:{Metal:"兄弟",Water:"子孙",Wood:"妻财",Fire:"官鬼",Earth:"父母"},Water:{Water:"兄弟",Wood:"子孙",Fire:"妻财",Earth:"官鬼",Metal:"父母"}}[t[e]][t[n]]}function h(e){return{"子":"水","亥":"水","寅":"木","卯":"木","巳":"火","午":"火","申":"金","酉":"金","辰":"土","戌":"土","丑":"土","未":"土"}[e]}function f(e,n){return b[e+n]||""}const b={"甲子":"海中金","乙丑":"海中金","丙寅":"炉中火","丁卯":"炉中火","戊辰":"大林木","己巳":"大林木","庚午":"路旁土","辛未":"路旁土","壬申":"剑锋金","癸酉":"剑锋金","甲戌":"山头火","乙亥":"山头火","丙子":"涧下水","丁丑":"涧下水","戊寅":"城头土","己卯":"城头土","庚辰":"白蜡金","辛巳":"白蜡金","壬午":"杨柳木","癸未":"杨柳木","甲申":"泉中水","乙酉":"泉中水","丙戌":"屋上土","丁亥":"屋上土","戊子":"霹雳火","己丑":"霹雳火","庚寅":"松柏木","辛卯":"松柏木","壬辰":"长流水","癸巳":"长流水","甲午":"沙中金","乙未":"沙中金","丙申":"山下火","丁酉":"山下火","戊戌":"平地木","己亥":"平地木","庚子":"壁上土","辛丑":"壁上土","壬寅":"金箔金","癸卯":"金箔金","甲辰":"覆灯火","乙巳":"覆灯火","丙午":"天河水","丁未":"天河水","戊申":"大驿土","己酉":"大驿土","庚戌":"钗钏金","辛亥":"钗钏金","壬子":"桑柘木","癸丑":"桑柘木","甲寅":"大溪水","乙卯":"大溪水","丙辰":"沙中土","丁巳":"沙中土","戊午":"天上火","己未":"天上火","庚申":"石榴木","辛酉":"石榴木","壬戌":"大海水","癸亥":"大海水"};function y(e,n){let t={"乾":7,"兑":3,"离":5,"震":1,"巽":6,"坎":2,"艮":4,"坤":0}[e?e.charAt(0):""];void 0===t&&(t=7);const r=t,o={7:0,0:7,1:6,6:1,2:5,5:2,4:3,3:4}[t],s=3^r;let i=r,a=r;n.includes("六世卦")||n.includes("八纯")?(i=o,a=o):["一世卦","二世卦","三世卦"].some((e=>n.includes(e)))?(i=r,a=o):["四世卦","五世卦"].some((e=>n.includes(e)))?(i=r,a=r):n.includes("游魂卦")?(i=r,a=s):n.includes("归魂卦")&&(i=o,a=r);const l=c(t);return[...m(i,i).slice(0,3),...m(a,a).slice(3,6)].map((e=>{const n=h(e.branch),t=g(l,n);return{stem:e.stem,branch:e.branch,element:n,relative:t,nayin:f(e.stem,e.branch)}}))}function d(e){return{0:{name:"坤",symbol:"☷",element:"土"},1:{name:"震",symbol:"☳",element:"木"},2:{name:"坎",symbol:"☵",element:"水"},3:{name:"兑",symbol:"☱",element:"金"},4:{name:"艮",symbol:"☶",element:"土"},5:{name:"离",symbol:"☲",element:"火"},6:{name:"巽",symbol:"☴",element:"木"},7:{name:"乾",symbol:"☰",element:"金"}}[e]||{name:"?",symbol:"?"}}export{s as a,i as b,m as c,y as d,h as e,g as f,r as g,f as h,d as i,o as j,l as k};
