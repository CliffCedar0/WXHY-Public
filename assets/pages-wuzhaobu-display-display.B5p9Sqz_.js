import{p as a,q as e,B as l,c as s,w as t,i,o as n,a as u,b as r,t as h,d as c,e as d,F as g,f as o,l as f,k as _}from"./index-a1KjuB_E.js";import{s as b,f as p,h as m,a as y}from"./sizhu.CsmR9TSq.js";import{Z as S,g as z}from"./shensha.BNxbvs-g.js";import{g as L}from"./calc.GI1_rKIG.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./index.BHYqNsFk.js";const w={0:"å­",1:"å­",2:"ä¸‘",3:"ä¸‘",4:"å¯…",5:"å¯…",6:"å¯",7:"å¯",8:"è¾°",9:"è¾°",10:"å·³",11:"å·³",12:"åˆ",13:"åˆ",14:"æœª",15:"æœª",16:"ç”³",17:"ç”³",18:"é…‰",19:"é…‰",20:"æˆŒ",21:"æˆŒ",22:"äº¥",23:"äº¥"},C=["é’é¾™","æœ±é›€","è…¾è›‡","å‹¾é™ˆ","ç™½è™","ç„æ­¦"],D={"ç”²":0,"ä¹™":0,"ä¸™":1,"ä¸":1,"æˆŠ":3,"å·±":3,"åºš":4,"è¾›":4,"å£¬":5,"ç™¸":5},Z=[[0,0],[1,0],[0,1],[1,1],[1,2],[2,1]],G={"ç”²":"æœ¨","ä¹™":"æœ¨","å¯…":"æœ¨","å¯":"æœ¨","æœ¨":"æœ¨","ä¸™":"ç«","ä¸":"ç«","å·³":"ç«","åˆ":"ç«","ç«":"ç«","æˆŠ":"åœŸ","å·±":"åœŸ","è¾°":"åœŸ","æˆŒ":"åœŸ","ä¸‘":"åœŸ","æœª":"åœŸ","åœŸ":"åœŸ","åºš":"é‡‘","è¾›":"é‡‘","ç”³":"é‡‘","é…‰":"é‡‘","é‡‘":"é‡‘","å£¬":"æ°´","ç™¸":"æ°´","äº¥":"æ°´","å­":"æ°´","æ°´":"æ°´"},q={"0,0":"æœ¨","0,1":"ç«","1,0":"æœ¨","1,1":"åœŸ","1,2":"é‡‘","2,1":"æ°´"},k={"æœ¨":"ç«","ç«":"åœŸ","åœŸ":"é‡‘","é‡‘":"æ°´","æ°´":"æœ¨"},W={"æœ¨":"åœŸ","åœŸ":"æ°´","æ°´":"ç«","ç«":"é‡‘","é‡‘":"æœ¨"};function E(a,e){return a&&e?a===e?"å…„å¼Ÿ":k[e]===a?"çˆ¶æ¯":W[e]===a?"å®˜é¬¼":k[a]===e?"å­å­™":W[a]===e?"å¦»è´¢":"":""}const v=x({data:()=>({solarDateStr:"",lunarDateStr:"",bazi:[],shenshaRows:[],inputGrid:[],liuShenGrid:[["","",""],["","",""],["","",""]],siZhuData:null,lunarMonth:1}),computed:{xingshenDisplayList(){const a={"é’é¾™":"é¾","æœ±é›€":"é›€","è…¾è›‡":"è›‡","å‹¾é™ˆ":"å‹¾","ç™½è™":"è™","ç„æ­¦":"ç„"};return["ç„æ­¦","ç™½è™","å‹¾é™ˆ","è…¾è›‡","æœ±é›€","é’é¾™"].map((e=>{let l="";if(this.lunarMonth){const a={"é’é¾™":"å¯…","æœ±é›€":"åˆ","è…¾è›‡":"å·³","å‹¾é™ˆ":"ä¸‘","ç™½è™":"ç”³","ç„æ­¦":"äº¥"}[e];if(a){const e=["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"],s=e.indexOf(a);l=e[(s+(this.lunarMonth-1))%12]}}return{shortName:a[e],zhi:l}}))}},onLoad(a){if(a.grid)try{this.inputGrid=JSON.parse(decodeURIComponent(a.grid))}catch(e){console.error("Failed to parse grid",e)}a.datetime&&(this.solarDateStr=decodeURIComponent(a.datetime)),this.initData()},methods:{goBack(){a().length>1?e():l({url:"/pages/wuzhaobu/start/start"})},initData(){let a;if(this.solarDateStr){const e=this.solarDateStr.split(" "),l=e[0].split("-"),s=e[1]?e[1].split(":"):["12","00"];a=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2]),parseInt(s[0]),parseInt(s[1]))}else{a=new Date;const e=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0"),t=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0");this.solarDateStr=`${e}-${l}-${s} ${t}:${i}`}this.calculateLunarDate(a),this.calculateBazi(a),this.calculateLiuShen(),this.calculateShenSha()},calculateLunarDate(a){try{const e=b(a);if(e){this.lunarMonth=e.month;const l=String(e.year).split("").map((a=>["ã€‡","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹"][parseInt(a)])).join(""),s=p(e.month),t=m(e.day),i=w[a.getHours()]+"æ—¶";this.lunarDateStr=`${l}å¹´${e.isLeap?"é—°":""}${s}æœˆ${t} ${i}`}}catch(e){console.error("Lunar calculation failed:",e),this.lunarDateStr="å†œå†è®¡ç®—é”™è¯¯"}},calculateBazi(a){try{const e=y(a);console.log("SiZhu result:",e),e&&(this.siZhuData=e,this.bazi=[{gan:e.yearGan,zhi:e.yearZhi,nayin:L(e.year)},{gan:e.monthGan,zhi:e.monthZhi,nayin:L(e.month)},{gan:e.dayGan,zhi:e.dayZhi,nayin:L(e.day)},{gan:e.hourGan,zhi:e.hourZhi,nayin:L(e.hour)}])}catch(e){console.error("Bazi calculation failed:",e),this.bazi=[{gan:"?",zhi:"?",nayin:""},{gan:"?",zhi:"?",nayin:""},{gan:"?",zhi:"?",nayin:""},{gan:"?",zhi:"?",nayin:""}],this.siZhuData=null}},calculateLiuShen(){if(this.liuShenGrid=[["","",""],["","",""],["","",""]],!this.bazi||this.bazi.length<3||!this.bazi[2].gan)return;const a=this.bazi[2].gan,e=D[a];if(void 0!==e)for(let l=0;l<6;l++){const a=(e+l)%6,[s,t]=Z[l];this.$set(this.liuShenGrid[s],t,C[a])}else console.error("Unknown day gan:",a)},calculateShenSha(){if(this.siZhuData)try{const a={yearGan:this.siZhuData.yearGan,yearZhi:this.siZhuData.yearZhi,monthGan:this.siZhuData.monthGan,monthZhi:this.siZhuData.monthZhi,dayGan:this.siZhuData.dayGan,dayZhi:this.siZhuData.dayZhi,hourGan:this.siZhuData.hourGan,hourZhi:this.siZhuData.hourZhi},e=[];S.forEach((l=>{const s=z(l,a,"");s&&s.length>0&&s.forEach((a=>{e.push({name:a,val:l})}))}));const l=[];for(let s=0;s<e.length;s+=5)l.push(e.slice(s,s+5));this.shenshaRows=l}catch(a){console.error("ShenSha calculation failed:",a),this.shenshaRows=[]}else this.shenshaRows=[]},getElementChar(a,e){return this.inputGrid&&this.inputGrid[a]&&this.inputGrid[a][e]?this.inputGrid[a][e]:""},getCellDetails:(a,e)=>null,getLiuShen(a,e){return this.liuShenGrid&&this.liuShenGrid[a]&&this.liuShenGrid[a][e]?this.liuShenGrid[a][e]:""},getLiuShenClass:a=>({"é’é¾™":"liushen-qinglong","æœ±é›€":"liushen-zhuque","è…¾è›‡":"liushen-tengshe","å‹¾é™ˆ":"liushen-gouchen","ç™½è™":"liushen-baihu","ç„æ­¦":"liushen-xuanwu"}[a]||""),getWuxingClass:a=>({"ç”²":"wood","ä¹™":"wood","å¯…":"wood","å¯":"wood","æœ¨":"wood","ä¸™":"fire","ä¸":"fire","å·³":"fire","åˆ":"fire","ç«":"fire","æˆŠ":"earth","å·±":"earth","è¾°":"earth","æˆŒ":"earth","ä¸‘":"earth","æœª":"earth","åœŸ":"earth","åºš":"metal","è¾›":"metal","ç”³":"metal","é…‰":"metal","é‡‘":"metal","å£¬":"water","ç™¸":"water","äº¥":"water","å­":"water","æ°´":"water"}[a]||""),getXunKong(a){if(!a||a.length<2)return"";const e=a.charAt(0),l=a.charAt(1),s=["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"],t=["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±","åºš","è¾›","å£¬","ç™¸"].indexOf(e),i=s.indexOf(l);if(-1===t||-1===i)return"";const n=(i-t+12)%12,u=(n-1+12)%12;return s[(n-2+12)%12]+s[u]},getNayinColor(a){if(!a)return"";const e=a.slice(-1);return this.getWuxingClass(e)},getXingShen(a){if(!a||!this.lunarMonth)return"";const e={"é’é¾™":"å¯…","æœ±é›€":"åˆ","è…¾è›‡":"å·³","å‹¾é™ˆ":"ä¸‘","ç™½è™":"ç”³","ç„æ­¦":"äº¥"}[a];if(!e)return"";const l=["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"],s=l.indexOf(e);return l[(s+(this.lunarMonth-1))%12]},getWuxing(a,e){const l=this.getElementChar(a,e);return G[l]||""},getLiuQin(a,e){if(0===a&&0===e)return"";return E(this.getWuxing(0,0),this.getWuxing(a,e))},getLiuQinXiang(a,e){if(0===a&&0===e)return"";return E(this.getWuxing(0,0),q[`${a},${e}`])}}},[["render",function(a,e,l,b,p,m){const y=_,S=i;return n(),s(S,{class:"container"},{default:t((()=>[u(S,{class:"nav-bar"},{default:t((()=>[u(S,{class:"left-actions"},{default:t((()=>[u(S,{class:"back-btn",onClick:m.goBack},{default:t((()=>[u(y,{class:"back-icon"},{default:t((()=>[r("â†")])),_:1}),u(y,{class:"back-text"},{default:t((()=>[r("è¿”å›")])),_:1})])),_:1},8,["onClick"])])),_:1}),u(y,{class:"nav-title"},{default:t((()=>[r("äº”å…†åœ")])),_:1}),u(S,{class:"nav-buttons"})])),_:1}),u(S,{class:"info-card"},{default:t((()=>[u(S,{class:"date-section"},{default:t((()=>[u(S,{class:"date-row"},{default:t((()=>[u(y,{class:"label"},{default:t((()=>[r("å…¬å†ï¼š")])),_:1}),u(y,{class:"value"},{default:t((()=>[r(h(p.solarDateStr),1)])),_:1})])),_:1}),u(S,{class:"date-row"},{default:t((()=>[u(y,{class:"label"},{default:t((()=>[r("å†œå†ï¼š")])),_:1}),u(y,{class:"value lunar"},{default:t((()=>[r(h(p.lunarDateStr),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"bazi-grid"},{default:t((()=>[u(S,{class:"bazi-row header-row"},{default:t((()=>[u(S,{class:"bazi-cell header-cell"},{default:t((()=>[u(y,null,{default:t((()=>[r("å¹´")])),_:1})])),_:1}),u(S,{class:"bazi-cell header-cell"},{default:t((()=>[u(y,null,{default:t((()=>[r("æœˆ")])),_:1})])),_:1}),u(S,{class:"bazi-cell header-cell"},{default:t((()=>[u(y,null,{default:t((()=>[r("æ—¥")])),_:1})])),_:1}),u(S,{class:"bazi-cell header-cell"},{default:t((()=>[u(y,null,{default:t((()=>[r("æ—¶")])),_:1})])),_:1})])),_:1}),u(S,{class:"bazi-row"},{default:t((()=>[(n(!0),c(g,null,d(p.bazi,((a,e)=>(n(),s(S,{class:"bazi-cell",key:"gz-"+e},{default:t((()=>[u(y,{class:f(m.getWuxingClass(a.gan))},{default:t((()=>[r(h(a.gan),1)])),_:2},1032,["class"]),u(y,{class:f(m.getWuxingClass(a.zhi))},{default:t((()=>[r(h(a.zhi),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1}),u(S,{class:"bazi-row"},{default:t((()=>[(n(!0),c(g,null,d(p.bazi,((a,e)=>(n(),s(S,{class:"bazi-cell",key:"xk-"+e},{default:t((()=>[(n(!0),c(g,null,d(m.getXunKong(a.gan+a.zhi).split(""),((a,e)=>(n(),s(y,{key:e,class:f(m.getWuxingClass(a))},{default:t((()=>[r(h(a),1)])),_:2},1032,["class"])))),128))])),_:2},1024)))),128))])),_:1}),u(S,{class:"bazi-row"},{default:t((()=>[(n(!0),c(g,null,d(p.bazi,((a,e)=>(n(),s(y,{class:f(["bazi-cell",m.getNayinColor(a.nayin)]),key:"ny-"+e},{default:t((()=>[r(h(a.nayin),1)])),_:2},1032,["class"])))),128))])),_:1})])),_:1})])),_:1}),u(S,{class:"display-card"},{default:t((()=>[m.xingshenDisplayList&&m.xingshenDisplayList.length>0?(n(),s(S,{key:0,class:"xingshen-box"},{default:t((()=>[u(S,{class:"xingshen-row"},{default:t((()=>[(n(!0),c(g,null,d(m.xingshenDisplayList,((a,e)=>(n(),s(y,{class:"xs-item",key:"name-"+e},{default:t((()=>[r(h(a.shortName),1)])),_:2},1024)))),128))])),_:1}),u(S,{class:"xingshen-row"},{default:t((()=>[(n(!0),c(g,null,d(m.xingshenDisplayList,((a,e)=>(n(),s(y,{class:"xs-item zhi",key:"zhi-"+e},{default:t((()=>[r(h(a.zhi),1)])),_:2},1024)))),128))])),_:1})])),_:1})):o("",!0),u(S,{class:"grid-display"},{default:t((()=>[u(S,{class:"grid-row"},{default:t((()=>[u(S,{class:"grid-cell"},{default:t((()=>[o("",!0),u(y,{class:f(["big-char",m.getWuxingClass(m.getElementChar(0,0))])},{default:t((()=>[r(h(m.getElementChar(0,0)||"ç©º"),1)])),_:1},8,["class"]),u(y,{class:f(["liushen-label",m.getLiuShenClass(m.getLiuShen(0,0))])},{default:t((()=>[r(h(m.getLiuShen(0,0)),1)])),_:1},8,["class"]),u(S,{class:"liuqin-container"},{default:t((()=>[u(y,{class:"liuqin-label"},{default:t((()=>[r("å…†èº«")])),_:1})])),_:1})])),_:1}),u(S,{class:"grid-cell"},{default:t((()=>[u(y,{class:"wuxing-bg fire"},{default:t((()=>[r("ç«")])),_:1}),u(y,{class:f(["big-char",m.getWuxingClass(m.getElementChar(0,1))])},{default:t((()=>[r(h(m.getElementChar(0,1)||"ç©º"),1)])),_:1},8,["class"]),u(y,{class:f(["liushen-label",m.getLiuShenClass(m.getLiuShen(0,1))])},{default:t((()=>[r(h(m.getLiuShen(0,1)),1)])),_:1},8,["class"]),u(S,{class:"liuqin-container"},{default:t((()=>[u(y,{class:"liuqin-label sub"},{default:t((()=>[r(h(m.getLiuQinXiang(0,1)),1)])),_:1}),u(y,{class:"liuqin-label"},{default:t((()=>[r(h(m.getLiuQin(0,1)),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"grid-cell empty-cell"})])),_:1}),u(S,{class:"grid-row"},{default:t((()=>[u(S,{class:"grid-cell"},{default:t((()=>[u(y,{class:"wuxing-bg wood"},{default:t((()=>[r("æœ¨")])),_:1}),u(y,{class:f(["big-char",m.getWuxingClass(m.getElementChar(1,0))])},{default:t((()=>[r(h(m.getElementChar(1,0)||"ç©º"),1)])),_:1},8,["class"]),u(y,{class:f(["liushen-label",m.getLiuShenClass(m.getLiuShen(1,0))])},{default:t((()=>[r(h(m.getLiuShen(1,0)),1)])),_:1},8,["class"]),u(S,{class:"liuqin-container"},{default:t((()=>[u(y,{class:"liuqin-label sub"},{default:t((()=>[r(h(m.getLiuQinXiang(1,0)),1)])),_:1}),u(y,{class:"liuqin-label"},{default:t((()=>[r(h(m.getLiuQin(1,0)),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"grid-cell center-cell"},{default:t((()=>[u(y,{class:"wuxing-bg earth"},{default:t((()=>[r("åœŸ")])),_:1}),u(y,{class:f(["big-char",m.getWuxingClass(m.getElementChar(1,1))])},{default:t((()=>[r(h(m.getElementChar(1,1)||"ç©º"),1)])),_:1},8,["class"]),u(y,{class:f(["liushen-label",m.getLiuShenClass(m.getLiuShen(1,1))])},{default:t((()=>[r(h(m.getLiuShen(1,1)),1)])),_:1},8,["class"]),u(S,{class:"liuqin-container"},{default:t((()=>[u(y,{class:"liuqin-label sub"},{default:t((()=>[r(h(m.getLiuQinXiang(1,1)),1)])),_:1}),u(y,{class:"liuqin-label"},{default:t((()=>[r(h(m.getLiuQin(1,1)),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"grid-cell"},{default:t((()=>[u(y,{class:"wuxing-bg metal"},{default:t((()=>[r("é‡‘")])),_:1}),u(y,{class:f(["big-char",m.getWuxingClass(m.getElementChar(1,2))])},{default:t((()=>[r(h(m.getElementChar(1,2)||"ç©º"),1)])),_:1},8,["class"]),u(y,{class:f(["liushen-label",m.getLiuShenClass(m.getLiuShen(1,2))])},{default:t((()=>[r(h(m.getLiuShen(1,2)),1)])),_:1},8,["class"]),u(S,{class:"liuqin-container"},{default:t((()=>[u(y,{class:"liuqin-label sub"},{default:t((()=>[r(h(m.getLiuQinXiang(1,2)),1)])),_:1}),u(y,{class:"liuqin-label"},{default:t((()=>[r(h(m.getLiuQin(1,2)),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(S,{class:"grid-row"},{default:t((()=>[u(S,{class:"grid-cell empty-cell"}),u(S,{class:"grid-cell"},{default:t((()=>[u(y,{class:"wuxing-bg water"},{default:t((()=>[r("æ°´")])),_:1}),u(y,{class:f(["big-char",m.getWuxingClass(m.getElementChar(2,1))])},{default:t((()=>[r(h(m.getElementChar(2,1)||"ç©º"),1)])),_:1},8,["class"]),u(y,{class:f(["liushen-label",m.getLiuShenClass(m.getLiuShen(2,1))])},{default:t((()=>[r(h(m.getLiuShen(2,1)),1)])),_:1},8,["class"]),u(S,{class:"liuqin-container"},{default:t((()=>[u(y,{class:"liuqin-label sub"},{default:t((()=>[r(h(m.getLiuQinXiang(2,1)),1)])),_:1}),u(y,{class:"liuqin-label"},{default:t((()=>[r(h(m.getLiuQin(2,1)),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"grid-cell empty-cell"})])),_:1})])),_:1})])),_:1}),u(S,{class:"shensha-card"},{default:t((()=>[u(S,{class:"section-title"},{default:t((()=>[r("ç¥ç…")])),_:1}),(n(!0),c(g,null,d(p.shenshaRows,((a,e)=>(n(),s(S,{class:"ss-row",key:e},{default:t((()=>[(n(!0),c(g,null,d(a,((a,e)=>(n(),s(S,{class:"ss-item",key:e},{default:t((()=>[u(y,{class:"ss-name"},{default:t((()=>[r(h(a.name),1)])),_:2},1024),u(y,{class:"ss-dash"},{default:t((()=>[r("-")])),_:1}),u(y,{class:"ss-val"},{default:t((()=>[r(h(a.val),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1}),u(S,{class:"copyright-info"},{default:t((()=>[u(S,{class:"copyright-line"},{default:t((()=>[r("Â© Developer: æ™¯å· Â· Wechat: Im_JingChuang")])),_:1}),u(S,{class:"copyright-line"},{default:t((()=>[r("Â© Technical supporter: å¿æ ¸ Â· Wechat: qinghe4994")])),_:1}),u(S,{class:"copyright-line"},{default:t((()=>[r("Â© Server supporterï¼š ğŸç‡•ä¹ç§¦ğŸ WeChatï¼šaispidercc")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-90762cd6"]]);export{v as default};
