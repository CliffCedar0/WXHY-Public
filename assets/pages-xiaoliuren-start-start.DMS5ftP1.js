import{J as e,$ as a,h as s,j as t,k as l,s as i,g as c,f as n,n as o,l as r,m as u,p as d,q as h,c as m,w as p,i as f,o as k,a as g,b as _,C as w,t as C,u as y,F as P,v as b,x as v,z as x,e as D,I as T,y as N}from"./index-CThkDFsO.js";import{D as z}from"./DatePickerWheel.C_6qQ6IY.js";import{l as M}from"./index.BHYqNsFk.js";import{v as S}from"./auth.CwkXTAOO.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=A({components:{DatePickerWheel:z},computed:{displayDate(){if(!this.customDate)return"å¹´-æœˆ-æ—¥";if("lunar"===this.calendarType){const a=this.customDate.split("-");if(3===a.length)try{const e=M.Solar.fromYmd(parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)).getLunar();return e.getYearInChinese()+"å¹´ "+e.getMonthInChinese()+"æœˆ"+e.getDayInChinese()}catch(e){return this.customDate}}return this.customDate}},data:()=>({modes:[{name:"ç‚¹é€‰å®«ä½",value:"click"},{name:"æŠ¥æ•°èµ·å¦",value:"number"}],currentMode:"click",statusBarHeight:20,calendarType:"solar",dayChangeMethod:"zichu",customDate:"",customTimeName:"å­æ—¶ (23-1ç‚¹)",timeOptions:[{zhi:"å­",range:"23-1",name:"å­æ—¶ (23-1ç‚¹)",min:23,max:1},{zhi:"ä¸‘",range:"1-3",name:"ä¸‘æ—¶ (1-3ç‚¹)",min:1,max:3},{zhi:"å¯…",range:"3-5",name:"å¯…æ—¶ (3-5ç‚¹)",min:3,max:5},{zhi:"å¯",range:"5-7",name:"å¯æ—¶ (5-7ç‚¹)",min:5,max:7},{zhi:"è¾°",range:"7-9",name:"è¾°æ—¶ (7-9ç‚¹)",min:7,max:9},{zhi:"å·³",range:"9-11",name:"å·³æ—¶ (9-11ç‚¹)",min:9,max:11},{zhi:"åˆ",range:"11-13",name:"åˆæ—¶ (11-13ç‚¹)",min:11,max:13},{zhi:"æœª",range:"13-15",name:"æœªæ—¶ (13-15ç‚¹)",min:13,max:15},{zhi:"ç”³",range:"15-17",name:"ç”³æ—¶ (15-17ç‚¹)",min:15,max:17},{zhi:"é…‰",range:"17-19",name:"é…‰æ—¶ (17-19ç‚¹)",min:17,max:19},{zhi:"æˆŒ",range:"19-21",name:"æˆŒæ—¶ (19-21ç‚¹)",min:19,max:21},{zhi:"äº¥",range:"21-23",name:"äº¥æ—¶ (21-23ç‚¹)",min:21,max:23}],selectedPalaces:[],inputNumbers:"",showCalendarTypePicker:!1,showDayChangePicker:!1,showTimePicker:!1,showAuthModal:!1,authPassword:"",tempParams:null}),onLoad(){const a=e();this.statusBarHeight=a.statusBarHeight||20;const s=new Date;this.customDate=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,this.updateTimeName(s.getHours())},onShow(){a("refreshXiaoliurenStart",(()=>{this.clearPalaces(),this.inputNumbers="";const e=new Date;this.customDate=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,this.updateTimeName(e.getHours())}))},methods:{goHome(){s().length>1?t({delta:1}):l({url:"/pages/index/index"})},onDateChange(e){this.customDate=e.value},selectShichen(e){this.customTimeName=e.name,this.showTimePicker=!1},updateTimeName(e){let a=this.timeOptions.find((a=>a.min>a.max?e>=a.min||e<a.max:e>=a.min&&e<a.max));this.customTimeName=a?a.name:"æœªçŸ¥"},addPalace(e){this.selectedPalaces.length<3&&this.selectedPalaces.push(e)},clearPalaces(){this.selectedPalaces=[]},getColorClass:e=>({"ç•™è¿":"pk-liulian","é€Ÿå–œ":"pk-suxi","å¤§å®‰":"pk-daan","èµ¤å£":"pk-chikou","å°å‰":"pk-xiaoji","ç©ºäº¡":"pk-kongwang"}[e]||""),calculateAndNavigate(){let e="",a="",s="";if("click"===this.currentMode){if(3!==this.selectedPalaces.length)return void i({title:"è¯·ç‚¹é€‰ä¸‰ä¸ªå®«ä½",icon:"none"});e=this.selectedPalaces[0],a=this.selectedPalaces[1],s=this.selectedPalaces[2]}else{if(!this.inputNumbers||this.inputNumbers.length<3)return void i({title:"è¯·è¾“å…¥æ­£ç¡®çš„æŠ¥æ•°",icon:"none"});const t=this.inputNumbers.split(""),l=["å¤§å®‰","ç•™è¿","é€Ÿå–œ","èµ¤å£","å°å‰","ç©ºäº¡"];e=l[parseInt(t[0])%6||0],a=l[parseInt(t[1])%6||0],s=l[parseInt(t[2])%6||0]}let t=this.customTimeName.substring(0,1);this.tempParams={tian:e,di:a,ren:s,date:this.customDate,shichen:t};const l=c().globalData&&c().globalData.isAdmin,o=n("xiaoliuren_vip");l||o?this.doNavigate(!1):(this.authPassword="",this.showAuthModal=!0)},doNavigate(e){const a={...this.tempParams,isGuest:e},s=encodeURIComponent(JSON.stringify(a));this.showAuthModal=!1,o({url:`/pages/xiaoliuren/display/display?config=${s}`})},closeAuthModal(){this.showAuthModal=!1,this.authPassword=""},async verifyAuth(){if(!this.authPassword.trim())return void i({title:"è¯·è¾“å…¥å¯†ç ",icon:"none"});r({title:"éªŒè¯ä¸­..."});const e=await S(this.authPassword.trim(),"xiaoliuren");u(),e?(d("xiaoliuren_vip",!0),i({title:"è§£é”æˆåŠŸ",icon:"success"}),this.doNavigate(!1)):(i({title:"å¯†ç é”™è¯¯æˆ–å·²å¤±æ•ˆï¼Œå°†ä»¥æ¸¸å®¢æ¨¡å¼è¿›å…¥",icon:"none"}),setTimeout((()=>{this.doNavigate(!0)}),1500))},continueAsGuest(){this.authPassword="",i({title:"å·²è¿›å…¥æ¸¸å®¢æ¨¡å¼",icon:"none"}),setTimeout((()=>{this.doNavigate(!0)}),800)}}},[["render",function(e,a,s,t,l,i){const c=D,n=f,o=T,r=h("DatePickerWheel");return k(),m(n,{class:"container"},{default:p((()=>[g(n,{class:"top-bar",style:w({paddingTop:l.statusBarHeight+"px"})},{default:p((()=>[g(n,{class:"back-btn",onClick:i.goHome},{default:p((()=>[g(c,{class:"back-arrow"},{default:p((()=>[_("â€¹")])),_:1})])),_:1},8,["onClick"]),g(c,{class:"page-title"},{default:p((()=>[_("å°å…­å£¬")])),_:1}),g(n,{class:"placeholder"})])),_:1},8,["style"]),g(n,{class:"tab-card"},{default:p((()=>[(k(!0),C(P,null,y(l.modes,((e,a)=>(k(),m(n,{class:N(["tab-item",{active:l.currentMode===e.value}]),key:a,onClick:a=>l.currentMode=e.value},{default:p((()=>[g(c,{class:"tab-text"},{default:p((()=>[_(b(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),g(n,{class:"form-card"},{default:p((()=>["click"===l.currentMode?(k(),m(n,{key:0,class:"input-section"},{default:p((()=>[g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("å†æ³•")])),_:1}),g(n,{class:"picker-view",onClick:a[0]||(a[0]=e=>l.showCalendarTypePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b("solar"===l.calendarType?"å…¬å†":"å†œå†"),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("æ¢æ—¥")])),_:1}),g(n,{class:"picker-view",onClick:a[1]||(a[1]=e=>l.showDayChangePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b("zhengzi"===l.dayChangeMethod?"æ­£å­æ¢æ—¥æ³•":"å­åˆæ¢æ—¥æ³•"),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("æ—¥æœŸ")])),_:1}),g(n,{class:"picker-view",onClick:a[2]||(a[2]=a=>e.showDatePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b(i.displayDate),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("æ—¶è¾°")])),_:1}),g(n,{class:"picker-view",onClick:a[3]||(a[3]=e=>l.showTimePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b(l.customTimeName||"æ—¶è¾°é€‰æ‹©"),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"selected-palaces-box"},{default:p((()=>[0===l.selectedPalaces.length?(k(),m(c,{key:0,class:"sp-placeholder"})):(k(),m(n,{key:1,class:"sp-result",style:{display:"flex","flex-direction":"row","align-items":"center"}},{default:p((()=>[(k(!0),C(P,null,y(l.selectedPalaces,((e,a)=>(k(),C(P,{key:a},[g(c,{class:N(i.getColorClass(e))},{default:p((()=>[_(b(e),1)])),_:2},1032,["class"]),a<l.selectedPalaces.length-1?(k(),m(c,{key:0,style:{margin:"0 10rpx",color:"#333"}},{default:p((()=>[_("->")])),_:1})):v("",!0)],64)))),128))])),_:1}))])),_:1}),g(n,{class:"clear-btn-wrap"},{default:p((()=>[g(n,{class:"clear-btn",onClick:i.clearPalaces},{default:p((()=>[_("æ¸…é™¤å®«ä½")])),_:1},8,["onClick"])])),_:1}),g(n,{class:"palace-keyboard"},{default:p((()=>[g(n,{class:"pk-row"},{default:p((()=>[g(n,{class:"pk-key pk-liulian",onClick:a[4]||(a[4]=e=>i.addPalace("ç•™è¿"))},{default:p((()=>[_("ç•™è¿")])),_:1}),g(n,{class:"pk-key pk-suxi",onClick:a[5]||(a[5]=e=>i.addPalace("é€Ÿå–œ"))},{default:p((()=>[_("é€Ÿå–œ")])),_:1}),g(n,{class:"pk-key pk-chikou",onClick:a[6]||(a[6]=e=>i.addPalace("èµ¤å£"))},{default:p((()=>[_("èµ¤å£")])),_:1})])),_:1}),g(n,{class:"pk-row"},{default:p((()=>[g(n,{class:"pk-key pk-daan",onClick:a[7]||(a[7]=e=>i.addPalace("å¤§å®‰"))},{default:p((()=>[_("å¤§å®‰")])),_:1}),g(n,{class:"pk-key pk-kongwang",onClick:a[8]||(a[8]=e=>i.addPalace("ç©ºäº¡"))},{default:p((()=>[_("ç©ºäº¡")])),_:1}),g(n,{class:"pk-key pk-xiaoji",onClick:a[9]||(a[9]=e=>i.addPalace("å°å‰"))},{default:p((()=>[_("å°å‰")])),_:1})])),_:1})])),_:1})])),_:1})):v("",!0),"number"===l.currentMode?(k(),m(n,{key:1,class:"input-section"},{default:p((()=>[g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("å†æ³•")])),_:1}),g(n,{class:"picker-view",onClick:a[10]||(a[10]=e=>l.showCalendarTypePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b("solar"===l.calendarType?"å…¬å†":"å†œå†"),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("æ¢æ—¥")])),_:1}),g(n,{class:"picker-view",onClick:a[11]||(a[11]=e=>l.showDayChangePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b("zhengzi"===l.dayChangeMethod?"æ­£å­æ¢æ—¥æ³•":"å­åˆæ¢æ—¥æ³•"),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("æ—¥æœŸ")])),_:1}),g(n,{class:"picker-view",onClick:a[12]||(a[12]=a=>e.showDatePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b(i.displayDate),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"picker-row config-row"},{default:p((()=>[g(c,{class:"config-label"},{default:p((()=>[_("æ—¶è¾°")])),_:1}),g(n,{class:"picker-view",onClick:a[13]||(a[13]=e=>l.showTimePicker=!0)},{default:p((()=>[g(c,{class:"picker-val"},{default:p((()=>[_(b(l.customTimeName||"æ—¶è¾°é€‰æ‹©"),1)])),_:1}),g(c,{class:"arrow"},{default:p((()=>[_(">")])),_:1})])),_:1})])),_:1}),g(n,{class:"number-input-wrap"},{default:p((()=>[g(o,{class:"number-input-box",type:"number",modelValue:l.inputNumbers,"onUpdate:modelValue":a[14]||(a[14]=e=>l.inputNumbers=e),placeholder:"è¯·è¾“å…¥æŠ¥æ•° (ä¾‹å¦‚: 825)"},null,8,["modelValue"])])),_:1})])),_:1})):v("",!0),g(n,{class:"submit-btn-wrap"},{default:p((()=>[g(n,{class:"submit-btn",onClick:i.calculateAndNavigate},{default:p((()=>[g(c,null,{default:p((()=>[_("æ’ç›˜")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),g(n,{class:"copyright-info"},{default:p((()=>[g(n,{class:"copyright-line"},{default:p((()=>[_("Â© Developer: æ™¯å· Â· Wechat: Im_JingChuang")])),_:1}),g(n,{class:"copyright-line"},{default:p((()=>[_("Â© Technical supporter: å¿æ ¸ Â· Wechat: qinghe4994")])),_:1}),g(n,{class:"copyright-line"},{default:p((()=>[_("Â© Server supporterï¼š ğŸç‡•ä¹ç§¦ğŸ WeChatï¼šaispidercc")])),_:1})])),_:1}),l.showAuthModal?(k(),m(n,{key:0,class:"auth-modal"},{default:p((()=>[g(n,{class:"auth-content"},{default:p((()=>[g(n,{class:"auth-header"},{default:p((()=>[g(c,{class:"auth-title"},{default:p((()=>[_("è¯·è¾“å…¥æˆæƒå¯†ç ")])),_:1}),g(c,{class:"close-btn",onClick:i.closeAuthModal},{default:p((()=>[_("Ã—")])),_:1},8,["onClick"]),g(c,{class:"auth-subtitle"},{default:p((()=>[_("å®Œæ•´ç‰ˆä¾›å†…éƒ¨å­¦å‘˜æŸ¥é˜…ï¼Œæ— å¯†ç å¯ç”¨æ¸¸å®¢é™åˆ¶ç‰ˆæ’ç›˜")])),_:1})])),_:1}),g(o,{class:"auth-input",type:"password",modelValue:l.authPassword,"onUpdate:modelValue":a[15]||(a[15]=e=>l.authPassword=e),placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["modelValue"]),g(n,{class:"auth-btns"},{default:p((()=>[g(n,{class:"auth-btn btn-guest",onClick:i.continueAsGuest},{default:p((()=>[_("æ¸¸å®¢è¿›å…¥")])),_:1},8,["onClick"]),g(n,{class:"auth-btn btn-verify",onClick:i.verifyAuth},{default:p((()=>[_("ç¡®å®šè§£é”")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):v("",!0),g(r,{show:e.showDatePicker,value:l.customDate,onChange:i.onDateChange,onClose:a[16]||(a[16]=a=>e.showDatePicker=!1)},null,8,["show","value","onChange"]),l.showTimePicker?(k(),m(n,{key:1,class:"shichen-modal",onClick:a[18]||(a[18]=e=>l.showTimePicker=!1)},{default:p((()=>[g(n,{class:"shichen-content",onClick:a[17]||(a[17]=x((()=>{}),["stop"]))},{default:p((()=>[g(n,{class:"shichen-grid"},{default:p((()=>[(k(!0),C(P,null,y(l.timeOptions,((e,a)=>(k(),m(n,{class:N(["shichen-item",{active:l.customTimeName===e.name}]),key:a,onClick:a=>i.selectShichen(e)},{default:p((()=>[g(c,{class:"shichen-zhi"},{default:p((()=>[_(b(e.zhi),1)])),_:2},1024),g(c,{class:"shichen-range"},{default:p((()=>[_(b(e.range),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),g(n,{class:"shichen-footer"},{default:p((()=>[g(c,{class:"shichen-footer-text"},{default:p((()=>[_("æ—¶è¾°ç¢ç¢å¿µ")])),_:1})])),_:1})])),_:1})])),_:1})):v("",!0),l.showCalendarTypePicker?(k(),m(n,{key:2,class:"picker-modal",onClick:a[22]||(a[22]=e=>l.showCalendarTypePicker=!1)},{default:p((()=>[g(n,{class:"picker-content",onClick:a[21]||(a[21]=x((()=>{}),["stop"]))},{default:p((()=>[g(n,{class:"p-item",onClick:a[19]||(a[19]=e=>{l.calendarType="solar",l.showCalendarTypePicker=!1})},{default:p((()=>[_("å…¬å†")])),_:1}),g(n,{class:"p-item",onClick:a[20]||(a[20]=e=>{l.calendarType="lunar",l.showCalendarTypePicker=!1})},{default:p((()=>[_("å†œå†")])),_:1})])),_:1})])),_:1})):v("",!0),l.showDayChangePicker?(k(),m(n,{key:3,class:"picker-modal",onClick:a[26]||(a[26]=e=>l.showDayChangePicker=!1)},{default:p((()=>[g(n,{class:"picker-content",onClick:a[25]||(a[25]=x((()=>{}),["stop"]))},{default:p((()=>[g(n,{class:"p-item",onClick:a[23]||(a[23]=e=>{l.dayChangeMethod="zhengzi",l.showDayChangePicker=!1})},{default:p((()=>[_("æ­£å­æ¢æ—¥æ³• (0ç‚¹)")])),_:1}),g(n,{class:"p-item",onClick:a[24]||(a[24]=e=>{l.dayChangeMethod="zichu",l.showDayChangePicker=!1})},{default:p((()=>[_("å­åˆæ¢æ—¥æ³• (23ç‚¹)")])),_:1})])),_:1})])),_:1})):v("",!0)])),_:1})}],["__scopeId","data-v-a7f14ced"]]);export{I as default};
